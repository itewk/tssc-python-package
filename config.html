<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>tssc.config API documentation</title>
<meta name="description" content="Configuration for TSSC workflow." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>tssc.config</code></h1>
</header>
<section id="section-intro">
<p>Configuration for TSSC workflow.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Configuration for TSSC workflow.
&#34;&#34;&#34;

import copy
import glob
import os.path

from .utils.file import parse_yaml_or_json_file
from .utils.dict import deep_merge

class TSSCConfig:
    &#34;&#34;&#34;Representation of configuration for TSSC workflow.

    Parameters
    ----------
    config : dict, list, str (file or directory), optional
        A dictionary that is a valid TSSC configuration,
        a string that is a path to a YAML or JSON file that is
        a valid TSSC configuration,
        a string that is a path to a directory containing one or more
        files that are valid YAML or JSON files that are valid
        configurations,
        or a list of any of the former.

    Attributes
    ----------
    __global_defaults : dict
    __global_environment_defaults : dict
    __tssc_step_configs : dict of str (step names) to TSSCStepConfig

    Raises
    ------
    ValueError
        If given config is not of expected type.
    AssertionError
        If given config contains any invalid TSSC configurations.
    &#34;&#34;&#34;
    TSSC_CONFIG_KEY = &#39;tssc-config&#39;
    TSSC_CONFIG_KEY_GLOBAL_DEFAULTS = &#39;global-defaults&#39;
    TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS = &#39;global-environment-defaults&#39;
    TSSC_CONFIG_KEY_ENVIRONMENT_NAME = &#39;environment-name&#39;
    TSSC_CONFIG_KEY_STEP_IMPLEMENTER = &#39;implementer&#39;
    TSSC_CONFIG_KEY_SUB_STEP_NAME = &#39;name&#39;
    TSSC_CONFIG_KEY_SUB_STEP_CONFIG = &#39;config&#39;
    TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG = &#39;environment-config&#39;

    def __init__(self, config=None):
        self.__global_defaults = {}
        self.__global_environment_defaults = {}
        self.__tssc_step_configs = {}

        if config is not None:
            self.add_config(config)

    @property
    def global_defaults(self):
        &#34;&#34;&#34;Get a deep copy of the global defaults.

        Returns
        -------
        dict
            Deep copy of the global defaults.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__global_defaults)

    @property
    def global_environment_defaults(self):
        &#34;&#34;&#34;Deep copy of all global environment defaults for all environments.

        Returns
        -------
        dict
            deep copy of all global environment defaults.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__global_environment_defaults)

    @property
    def step_configs(self):
        &#34;&#34;&#34;
        Returns
        -------
        list of TSSCStepConfig
        &#34;&#34;&#34;
        return self.__tssc_step_configs

    def get_global_environment_defaults_for_environment(self, env):
        &#34;&#34;&#34;Get a deep copy of all of the global environment defaults or for a given an environment.

        Parameters
        ----------
        env : str
            The global environment defaults for the given environment.
            If given environment name does not exist in environment defaults then empty dict.

        Returns
        -------
        dict
            Deep copy of the global environment defaults for the given environment
            or empty dict if no environment given or environment does not exist in the defaults
        &#34;&#34;&#34;
        if env is not None:
            if env in self.__global_environment_defaults:
                global_environment_defaults = copy.deepcopy(self.__global_environment_defaults[env])
            else:
                global_environment_defaults = {}
        else:
            global_environment_defaults = {}

        return global_environment_defaults

    def get_step_config(self, step_name):
        &#34;&#34;&#34;Get the step config for a given step name.

        Parameters
        ----------
        step_name : str
            Name of the step to get the step configuration for.

        Returns
        -------
        TSSCStepConfig
            Step configuration for the given step name or None if does not exist
        &#34;&#34;&#34;
        if step_name in self.step_configs:
            step_config = self.step_configs[step_name]
        else:
            step_config = None

        return step_config

    def get_sub_step_configs(self, step_name):
        &#34;&#34;&#34;Gets lit of configured TSSC sub step configurations for a TSSC step with the given name.

        Parameters
        ----------
        step_name : str
            Name of TSSC step to get configured sub steps for.

        Returns
        -------
        list of TSSCSubStepConfig
            List of configured TSSC sub step configurations for the TSSC step with the given name.
        &#34;&#34;&#34;

        if step_name in self.step_configs:
            sub_step_configs = self.step_configs[step_name].sub_steps
        else:
            sub_step_configs = []

        return sub_step_configs

    def add_config(self, config):
        &#34;&#34;&#34;Parses, validates, and adds a given config to this TSSCConfig.

        Parameters
        ----------
        config : dict, list, str (file or directory)
            A dictionary that is a valid TSSC configuration,
            a string that is a path to a YAML or JSON file that is
            a valid TSSC configuration,
            a string that is a path to a directory containing one or more
            files that are valid YAML or JSON files that are valid
            configurations,
            or a list of any of the former.

        Raises
        ------
        ValueError
            If given config is not of expected type.
        AssertionError
            If given config contains any invalid TSSC configurations.
        &#34;&#34;&#34;
        if isinstance(config, dict):
            # add the config
            self.__add_config_dict(config)
        elif isinstance(config, list):
            # for each item in the list, treat it as a config to add
            for _config in config:
                self.add_config(_config)
        elif isinstance(config, str):
            if os.path.isfile(config):
                self.__add_config_file(config)
            elif os.path.isdir(config):
                # for each recursively found file in the directory add the config file
                config_dir_files = glob.glob(config + &#39;/**&#39;, recursive=True)
                found_nested_file = False
                for config_dir_file in config_dir_files:
                    if os.path.isfile(config_dir_file):
                        found_nested_file = True
                        self.__add_config_file(config_dir_file)

                if not found_nested_file:
                    raise ValueError(
                        f&#34;Given config string ({config}) is a directory&#34; +
                        &#34; with no recursive children files.&#34;
                    )
            else:
                raise ValueError(
                    f&#34;Given config string ({config}) is not a valid path.&#34;
                )
        else:
            raise ValueError(
                f&#34;Given config ({config}) is unexpected type ({type(config)}) &#34; +
                &#34;not a dictionary, string, or list of former.&#34;
            )

    def set_step_config_overrides(self, step_name, step_config_overrides):
        &#34;&#34;&#34;Sets configuration overrides for all sub steps of a given step.

        Notes
        -----
        If step configuration overrides are already set for the given step then
        the existing overides will be replaced with the newly given step configuration
        overrides.

        Parameters
        ----------
        step_name : str
            Name of step to add configuration overrides for all sub steps for.
        step_config_overrides : dict
            Overrides for all sub steps for the step with the given name.
        &#34;&#34;&#34;
        if step_name not in self.step_configs:
            self.step_configs[step_name] = TSSCStepConfig(self, step_name)

        self.step_configs[step_name].step_config_overrides = step_config_overrides

    def __add_config_file(self, config_file):
        &#34;&#34;&#34;Adds a JSON or YAML file as config to this TSSCConfig.

        Parameters
        ----------
        config_file : str (file path)
            A string that is a path to an existing YAML or JSON file to
            parse and validate as a TSSC configuration to add to this TSSCConfig.

        Raises
        ------
        ValueError
            If can not parse given file as YAML or JSON
        AssertionError
            If dictionary parsed from given YAML or JSON file is not a valid TSSC config.
        &#34;&#34;&#34;
        # parse the configuration file
        try:
            parsed_config_file = parse_yaml_or_json_file(config_file)
        except ValueError as error:
            raise ValueError(
                f&#34;Error parsing config file ({config_file}) as json or yaml&#34;
            ) from error

        # add the config parsed from file
        try:
            self.__add_config_dict(parsed_config_file)
        except AssertionError as error:
            raise AssertionError(
                f&#34;Failed to add parsed configuration file ({config_file}): {error}&#34;
            ) from error

    def __add_config_dict(self, config_dict): # pylint: disable=too-many-locals, too-many-branches
        &#34;&#34;&#34;Add a TSSC configuration dictionary to the list of TSSC configuration dictionaries.

        Parameters
        ----------
        config_dict : dict
            A dictionary to validate as a TSSC configuration and to add to this TSSCConfig.

        Raises
        ------
        AssertionError
            If the given config_dict is not a valid TSSC configuration dictionary.
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
            If sub step does not define a step implementer.
        ValueError
            If duplicative leaf keys when merging global defaults
            If duplicative leaf keys when merging global env defaults
            If step config is not of type dict or list
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        assert TSSCConfig.TSSC_CONFIG_KEY in config_dict, \
            &#34;Failed to add invalid TSSC config. &#34; + \
            f&#34;Missing expected top level key ({TSSCConfig.TSSC_CONFIG_KEY}): &#34; + \
            f&#34;{config_dict}&#34;

        tssc_config = config_dict[TSSCConfig.TSSC_CONFIG_KEY]
        for key, value in tssc_config.items():
            # if global default key
            # else if global env defaults key
            # else assume step config
            if key == TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_DEFAULTS:
                try:
                    self.__global_defaults = deep_merge(
                        copy.deepcopy(self.__global_defaults),
                        copy.deepcopy(value)
                    )
                except ValueError as error:
                    raise ValueError(
                        f&#34;Error merging global defaults: {error}&#34;
                    ) from error
            elif key == TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS:
                for env, env_config in value.items():
                    if env not in self.__global_environment_defaults:
                        self.__global_environment_defaults[env] = {
                            TSSCConfig.TSSC_CONFIG_KEY_ENVIRONMENT_NAME: env
                        }

                    try:
                        self.__global_environment_defaults[env] = deep_merge(
                            copy.deepcopy(self.__global_environment_defaults[env]),
                            copy.deepcopy(env_config)
                        )
                    except ValueError as error:
                        raise ValueError(
                            f&#34;Error merging global environment ({env}) defaults: {error}&#34;
                        ) from error
            else:
                step_name = key
                step_config = value

                # if step_config is dict then assume step with single sub step
                if isinstance(step_config, dict):
                    sub_steps = [step_config]
                elif isinstance(step_config, list):
                    sub_steps = step_config
                else:
                    raise ValueError(
                        f&#34;Expected step ({step_name}) to have have step config ({step_config})&#34; +
                        f&#34; of type dict or list but got: {type(step_config)}&#34;
                    )

                for sub_step in sub_steps:
                    assert TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER in sub_step, \
                        f&#34;Step ({step_name}) defines a single sub step with values &#34; + \
                        f&#34;({sub_step}) but is missing value for key: &#34; + \
                        f&#34;{TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER}&#34;

                    sub_step_implementer_name = \
                        sub_step[TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER]

                    # if sub step name given
                    # else if no sub step name given use step implementer as sub step name
                    if TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME in sub_step:
                        sub_step_name = sub_step[TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME]
                    else:
                        sub_step_name = sub_step_implementer_name

                    if TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG in sub_step:
                        sub_step_config = copy.deepcopy(
                            sub_step[TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG])
                    else:
                        sub_step_config = {}

                    if TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG in sub_step:
                        sub_step_env_config = copy.deepcopy(
                            sub_step[TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG])
                    else:
                        sub_step_env_config = {}

                    self.add_or_update_step_config(
                        step_name=step_name,
                        sub_step_name=sub_step_name,
                        sub_step_implementer_name=sub_step_implementer_name,
                        sub_step_config=sub_step_config,
                        sub_step_env_config=sub_step_env_config
                    )

    def add_or_update_step_config( # pylint: disable=too-many-arguments
            self,
            step_name,
            sub_step_name,
            sub_step_implementer_name,
            sub_step_config,
            sub_step_env_config):
        &#34;&#34;&#34;Adds a new step configuration with a single new sub step or
        updates an existing step with new or updated sub step.

        Parameters
        ----------
        step_name : str
            Name of step to create or update.
        sub_step_name : str
            Name of the sub step to add or update on the new or updated step.
        sub_step_implementer_name : str
            Name of the sub step implementer for the sub step being added or updated.
            If updating this can not be different then existing sub step with the same name.
        sub_step_config : dict, optional
            Sub step configuration to add or update for named sub step on the new or updated step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step configuration.
        sub_step_env_config : dict, optional
            Sub step environment configuration to add or update for named sub step on the
                new or updated step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step environment configuration.

        Raises
        ------
        AssertionError
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        if step_name not in self.step_configs:
            self.step_configs[step_name] = TSSCStepConfig(self, step_name)

        tssc_step_config = self.step_configs[step_name]
        tssc_step_config.add_or_update_sub_step_config(
            sub_step_name=sub_step_name,
            sub_step_implementer_name=sub_step_implementer_name,
            sub_step_config=sub_step_config,
            sub_step_env_config=sub_step_env_config
        )

class TSSCStepConfig:
    &#34;&#34;&#34;Representation of a TSSC step configuration.

    Parameters
    ----------
    parent_config : TSSCConfig
        Parent TSSC configuration containing this step configuration.
    step_name : str
        Name of the TSSC step.

    Attributes
    ----------
    __parent_config : TSSCConfig
    __step_name : str
    __sub_steps : list of TSSCSubStepConfig
    __sub_step_config_overrides : dict
    &#34;&#34;&#34;

    def __init__(self, parent_config, step_name):
        self.__parent_config = parent_config
        self.__step_name = step_name
        self.__sub_steps = []
        self.__step_config_overrides = {}

    @property
    def parent_config(self):
        &#34;&#34;&#34;
        Returns
        -------
        TSSCConfig
        &#34;&#34;&#34;
        return self.__parent_config

    @property
    def step_name(self):
        &#34;&#34;&#34;
        Returns
        -------
        str
            Name of this step.
        &#34;&#34;&#34;
        return self.__step_name

    @property
    def sub_steps(self):
        &#34;&#34;&#34;
        Returns
        -------
        list of TSSCSubStepConfig
            Sub steps of this step.
        &#34;&#34;&#34;
        return self.__sub_steps

    def get_sub_step(self, sub_step_name):
        &#34;&#34;&#34;Get sub step of this step with a given name if one exists.

        Parameters
        ----------
        sub_step_name : str
            Name of the sub step of this step to get.

        Returns
        -------
        TSSCSubStepConfig
            Sub step of this step with the given name or
            None if no sub step with given name exists as part of this step.
        &#34;&#34;&#34;
        for sub_step in self.sub_steps:
            if sub_step_name == sub_step.sub_step_name:
                return sub_step

        return None

    @property
    def step_config_overrides(self):
        &#34;&#34;&#34;Gets a deep copy of the step configuration overrides.

        Returns
        -------
        dict
            Deep copy of the step configuration overrides.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__step_config_overrides)

    @step_config_overrides.setter
    def step_config_overrides(self, step_config_overrides):
        &#34;&#34;&#34;Sets the step configuration overrides.

        Parameters
        ----------
        step_config_overrides : dict
            New step configuration overrides.
        &#34;&#34;&#34;
        self.__step_config_overrides = step_config_overrides if step_config_overrides else {}

    def add_or_update_sub_step_config(
            self,
            sub_step_name,
            sub_step_implementer_name,
            sub_step_config=None,
            sub_step_env_config=None):
        &#34;&#34;&#34;Add a new or update an existing sub step configuration for this step.

        Parameters
        ----------
        sub_step_name : str
            Name of the sub step to add or update.
        sub_step_implementer_name : str
            Name of the sub step implementer for the sub step being added or updated.
            If updating this can not be different then existing sub step with the same name.
        sub_step_config : dict, optional
            Sub step configuration to add or update for named sub step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step configuration.
        sub_step_env_config : dict, optional
            Sub step environment configuration to add or update for named sub step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step environment configuration.

        Raises
        ------
        AssertionError
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        existing_tssc_sub_step_config = None
        for tssc_sub_step_config in self.sub_steps:
            if tssc_sub_step_config.sub_step_name == sub_step_name:
                existing_tssc_sub_step_config = tssc_sub_step_config
                break

        if existing_tssc_sub_step_config is None:
            tssc_sub_step_config = TSSCSubStepConfig(
                parent_step_config=self,
                sub_step_name=sub_step_name,
                sub_step_implementer_name=sub_step_implementer_name,
                sub_step_config=sub_step_config,
                sub_step_env_config=sub_step_env_config
            )
            self.sub_steps.append(tssc_sub_step_config)
        else:
            assert sub_step_implementer_name == tssc_sub_step_config.sub_step_implementer_name, \
                f&#34;Step ({self.step_name}) failed to update sub step ({sub_step_name})&#34; + \
                &#34; with new config due to new sub step implementer&#34; + \
                f&#34; ({sub_step_implementer_name}) not matching existing sub step implementer&#34; + \
                f&#34; ({tssc_sub_step_config.sub_step_implementer_name}).&#34;

            tssc_sub_step_config.merge_sub_step_config(sub_step_config)
            tssc_sub_step_config.merge_sub_step_env_config(sub_step_env_config)

class TSSCSubStepConfig:
    &#34;&#34;&#34;Representation of a TSSC sub step configuration.

    Parameters
    ----------
    parent_step_config : TSSCStepConfig
        Parent TSSC step config to this sub step coonfig.
    sub_step_name : str
        Name of this sub step.
    sub_step_implementer_name : str
        Step implementer for this sub step.
    sub_step_config : dict, optional
        Configuration specific to this sub step.
    sub_step_env_config : dict, optional
        Environment specific configuration specific to this sub step.

    Attributes
    ----------
    __parent_step_config : TSSCStepConfig
    __sub_step_name : str
    __sub_step_implementer_name : str
    __sub_step_config : dict
    __sub_step_env_config : dict
    &#34;&#34;&#34;

    def __init__( # pylint: disable=too-many-arguments
            self,
            parent_step_config,
            sub_step_name,
            sub_step_implementer_name,
            sub_step_config=None,
            sub_step_env_config=None):

        self.__parent_step_config = parent_step_config
        self.__sub_step_name = sub_step_name
        self.__sub_step_implementer_name = sub_step_implementer_name

        if sub_step_config is None:
            sub_step_config = {}
        self.__sub_step_config = sub_step_config

        if sub_step_env_config is None:
            sub_step_env_config = {}
        self.__sub_step_env_config = sub_step_env_config

    @property
    def parent_config(self):
        &#34;&#34;&#34;
        Returns
        -------
        TSSCConfig
            Parent TSSC config.
        &#34;&#34;&#34;
        return self.parent_step_config.parent_config

    @property
    def parent_step_config(self):
        &#34;&#34;&#34;
        Returns
        -------
        TSSCStepConfig
            Parent TSSC step config.
        &#34;&#34;&#34;
        return self.__parent_step_config

    @property
    def step_name(self):
        &#34;&#34;&#34;Convenience function to get parent TSSC step name.

        Returns
        -------
        str
            Parent TSSC step name.
        &#34;&#34;&#34;
        return self.parent_step_config.step_name

    @property
    def step_config_overrides(self):
        &#34;&#34;&#34;Convenience function to get step config overrides

        Returns
        -------
        str
            Parent TSSC step config overrides
        &#34;&#34;&#34;
        return self.parent_step_config.step_config_overrides

    @property
    def sub_step_name(self):
        &#34;&#34;&#34;
        Returns
        -------
        str
            TSSC sub step name.
        &#34;&#34;&#34;
        return self.__sub_step_name

    @property
    def sub_step_implementer_name(self):
        &#34;&#34;&#34;
        Returns
        -------
        str
            TSSC implementer name.
        &#34;&#34;&#34;
        return self.__sub_step_implementer_name

    @property
    def sub_step_config(self):
        &#34;&#34;&#34;Get a deep copy of the sub step configuration.

        Returns
        -------
        dict
            Deep copy of the sub step configuration.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__sub_step_config)

    @property
    def global_defaults(self):
        &#34;&#34;&#34;Convince function for getting the global defaults from the parent config.

        Returns
        -------
        dict
            Deep copy of the global defaults
        &#34;&#34;&#34;
        return self.parent_config.global_defaults

    @property
    def sub_step_env_config(self):
        &#34;&#34;&#34;Gets the environment specific configuration for all environments for this sub step.

        Returns
        -------
        dict
            The environment specific configuration for all environments for this sub step.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__sub_step_env_config)

    def get_global_environment_defaults(self, env):
        &#34;&#34;&#34;Convince function for getting the global environment defaults from the parent config.

        Parameters
        ----------
        env : str
            Environment to get the global environment configuration for.

        Returns
        -------
        dict
            Deep copy of the global defaults for a given environment
        &#34;&#34;&#34;
        return self.parent_config.get_global_environment_defaults_for_environment(env)

    def get_sub_step_env_config(self, env):
        &#34;&#34;&#34;Get the sub step environment configuration for an environment.

        Parameters
        ----------
        env : str
            Environment to get the sub step configuration for.

        Returns
        -------
        dict
            Environment specific sub step configuration.
            Empty dict if no environment specific sub step configuration.
        &#34;&#34;&#34;
        if env in self.sub_step_env_config:
            sub_step_env_config = self.sub_step_env_config[env]
        else:
            sub_step_env_config = {}

        return sub_step_env_config

    def merge_sub_step_config(self, new_sub_step_config):
        &#34;&#34;&#34;Merge new sub step configuration into the existing sub step configuration.

        Parameters
        ----------
        new_sub_step_config : dict
            New sub step configuration to merge into the existing sub step configuration.

        Raises
        ------
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
        &#34;&#34;&#34;

        if new_sub_step_config is not None:
            try:
                self.__sub_step_config = deep_merge(
                    self.sub_step_config,
                    copy.deepcopy(new_sub_step_config)
                )
            except ValueError as error:
                raise ValueError(
                    &#34;Error merging new sub step configuration&#34; +
                    &#34; into existing sub step configuration&#34; +
                    f&#34; for sub step ({self.sub_step_name}) of step ({self.step_name}): {error}&#34;
                ) from error

    def merge_sub_step_env_config(self, new_sub_step_env_config):
        &#34;&#34;&#34;Merge new sub step environment configuration into the existing
        sub step environment configuration.

        Parameters
        ----------
        new_sub_step_env_config : dict
            New sub step environment configuration to merge into
                the existing sub step environment configuration.

        Raises
        ------
        ValueError
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        if new_sub_step_env_config is not None:
            try:
                self.__sub_step_env_config = deep_merge(
                    self.__sub_step_env_config,
                    copy.deepcopy(new_sub_step_env_config)
                )
            except ValueError as error:
                raise ValueError(
                    &#34;Error merging new sub step environment configuration&#34; +
                    &#34; into existing sub step environment configuration&#34; +
                    f&#34; for sub step ({self.sub_step_name}) of step ({self.step_name}): {error}&#34;
                ) from error

    def get_config_value(self, key, environment=None, defaults=None):
        &#34;&#34;&#34;Get the configuration value for a given configuration key from the
        merged set of configuration sources.

        From least precedence to highest precedence.

            1. defaults
            2. Global Configuration Defaults (self.global_config_defaults)
            3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
            4. Step Configuration ( self.step_config)
            5. Step Environment Configuration (self.step_environment_config)
            6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

        Also See
        --------
        get_copy_of_runtime_step_config

        Parameters
        ----------
        key : str
            Key to get the configuration value for.
        environment : str, optional
            Environment to include the configuration for if running in the context of
            a specific environment.
        defaults : dict, optional
            If no value for the given configuration key found in any of the configuration
            sources then use these defaults as last resort.

        Returns
        -------
        str, int, dict, list, or bool or None
            Value of the given configuration key or None if one does not exist
            for this sub step in the given context with the given defaults.
        &#34;&#34;&#34;
        runtime_step_config = self.__merge_runtime_step_config(environment, defaults)

        if key in runtime_step_config:
            value = copy.deepcopy(runtime_step_config[key])
        else:
            value = None

        return value

    def get_copy_of_runtime_step_config(self, environment=None, defaults=None):
        &#34;&#34;&#34;Take all of the context about this sub step merges together a single dictionary
        with all of the configuration for a given step.

        From least precedence to highest precedence.

            1. defaults
            2. Global Configuration Defaults (self.global_config_defaults)
            3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
            4. Step Configuration ( self.step_config)
            5. Step Environment Configuration (self.step_environment_config)
            6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

        Also See
        --------
        get_config_value

        Parameters
        ----------
        environment : str, optional
            Environment to get the runtime step configuration for
        defaults : dict, optional
            Defaults to use if no other configuration specified from any other source
            for each given key.

        Returns
        -------
        dict
            A deep copy of the merged runtime step configuration
        &#34;&#34;&#34;
        defaults = defaults if defaults else {}

        return copy.deepcopy(self.__merge_runtime_step_config(environment, defaults))

    def __merge_runtime_step_config(self, environment=None, defaults=None):
        &#34;&#34;&#34;Take all of the context about this sub step merges together a single dictionary
        with all of the configuration for a given step.

        From least precedence to highest precedence.

            1. defaults
            2. Global Configuration Defaults (self.global_config_defaults)
            3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
            4. Step Configuration ( self.step_config)
            5. Step Environment Configuration (self.step_environment_config)
            6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

        Notes
        -----
        This is not intended to be accessed outside of this class since it gives direct access
        to the underlying dictionaries which could in theory be changed, which would not be the
        intended use.

        Parameters
        ----------
        environment : str, optional
            Environment to get the runtime step configuration for
        defaults : dict, optional
            Defaults to use if no other configuration specified from any other source
            for each given key.

        Returns
        -------
        dict
            Merged runtime step configuration
        &#34;&#34;&#34;
        defaults = defaults if defaults else {}

        return {
            **defaults,
            **self.global_defaults,
            **self.get_global_environment_defaults(environment),
            **self.sub_step_config,
            **self.get_sub_step_env_config(environment),
            **self.step_config_overrides,
        }</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="tssc.config.TSSCConfig"><code class="flex name class">
<span>class <span class="ident">TSSCConfig</span></span>
<span>(</span><span>config=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Representation of configuration for TSSC workflow.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>config</code></strong> :&ensp;<code>dict, list, str (file</code> or <code>directory)</code>, optional</dt>
<dd>A dictionary that is a valid TSSC configuration,
a string that is a path to a YAML or JSON file that is
a valid TSSC configuration,
a string that is a path to a directory containing one or more
files that are valid YAML or JSON files that are valid
configurations,
or a list of any of the former.</dd>
</dl>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>__global_defaults</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__global_environment_defaults</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__tssc_step_configs</code></strong> :&ensp;<code>dict</code> of <code>str (step names) to <a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></dt>
<dd>&nbsp;</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If given config is not of expected type.</dd>
<dt><code>AssertionError</code></dt>
<dd>If given config contains any invalid TSSC configurations.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TSSCConfig:
    &#34;&#34;&#34;Representation of configuration for TSSC workflow.

    Parameters
    ----------
    config : dict, list, str (file or directory), optional
        A dictionary that is a valid TSSC configuration,
        a string that is a path to a YAML or JSON file that is
        a valid TSSC configuration,
        a string that is a path to a directory containing one or more
        files that are valid YAML or JSON files that are valid
        configurations,
        or a list of any of the former.

    Attributes
    ----------
    __global_defaults : dict
    __global_environment_defaults : dict
    __tssc_step_configs : dict of str (step names) to TSSCStepConfig

    Raises
    ------
    ValueError
        If given config is not of expected type.
    AssertionError
        If given config contains any invalid TSSC configurations.
    &#34;&#34;&#34;
    TSSC_CONFIG_KEY = &#39;tssc-config&#39;
    TSSC_CONFIG_KEY_GLOBAL_DEFAULTS = &#39;global-defaults&#39;
    TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS = &#39;global-environment-defaults&#39;
    TSSC_CONFIG_KEY_ENVIRONMENT_NAME = &#39;environment-name&#39;
    TSSC_CONFIG_KEY_STEP_IMPLEMENTER = &#39;implementer&#39;
    TSSC_CONFIG_KEY_SUB_STEP_NAME = &#39;name&#39;
    TSSC_CONFIG_KEY_SUB_STEP_CONFIG = &#39;config&#39;
    TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG = &#39;environment-config&#39;

    def __init__(self, config=None):
        self.__global_defaults = {}
        self.__global_environment_defaults = {}
        self.__tssc_step_configs = {}

        if config is not None:
            self.add_config(config)

    @property
    def global_defaults(self):
        &#34;&#34;&#34;Get a deep copy of the global defaults.

        Returns
        -------
        dict
            Deep copy of the global defaults.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__global_defaults)

    @property
    def global_environment_defaults(self):
        &#34;&#34;&#34;Deep copy of all global environment defaults for all environments.

        Returns
        -------
        dict
            deep copy of all global environment defaults.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__global_environment_defaults)

    @property
    def step_configs(self):
        &#34;&#34;&#34;
        Returns
        -------
        list of TSSCStepConfig
        &#34;&#34;&#34;
        return self.__tssc_step_configs

    def get_global_environment_defaults_for_environment(self, env):
        &#34;&#34;&#34;Get a deep copy of all of the global environment defaults or for a given an environment.

        Parameters
        ----------
        env : str
            The global environment defaults for the given environment.
            If given environment name does not exist in environment defaults then empty dict.

        Returns
        -------
        dict
            Deep copy of the global environment defaults for the given environment
            or empty dict if no environment given or environment does not exist in the defaults
        &#34;&#34;&#34;
        if env is not None:
            if env in self.__global_environment_defaults:
                global_environment_defaults = copy.deepcopy(self.__global_environment_defaults[env])
            else:
                global_environment_defaults = {}
        else:
            global_environment_defaults = {}

        return global_environment_defaults

    def get_step_config(self, step_name):
        &#34;&#34;&#34;Get the step config for a given step name.

        Parameters
        ----------
        step_name : str
            Name of the step to get the step configuration for.

        Returns
        -------
        TSSCStepConfig
            Step configuration for the given step name or None if does not exist
        &#34;&#34;&#34;
        if step_name in self.step_configs:
            step_config = self.step_configs[step_name]
        else:
            step_config = None

        return step_config

    def get_sub_step_configs(self, step_name):
        &#34;&#34;&#34;Gets lit of configured TSSC sub step configurations for a TSSC step with the given name.

        Parameters
        ----------
        step_name : str
            Name of TSSC step to get configured sub steps for.

        Returns
        -------
        list of TSSCSubStepConfig
            List of configured TSSC sub step configurations for the TSSC step with the given name.
        &#34;&#34;&#34;

        if step_name in self.step_configs:
            sub_step_configs = self.step_configs[step_name].sub_steps
        else:
            sub_step_configs = []

        return sub_step_configs

    def add_config(self, config):
        &#34;&#34;&#34;Parses, validates, and adds a given config to this TSSCConfig.

        Parameters
        ----------
        config : dict, list, str (file or directory)
            A dictionary that is a valid TSSC configuration,
            a string that is a path to a YAML or JSON file that is
            a valid TSSC configuration,
            a string that is a path to a directory containing one or more
            files that are valid YAML or JSON files that are valid
            configurations,
            or a list of any of the former.

        Raises
        ------
        ValueError
            If given config is not of expected type.
        AssertionError
            If given config contains any invalid TSSC configurations.
        &#34;&#34;&#34;
        if isinstance(config, dict):
            # add the config
            self.__add_config_dict(config)
        elif isinstance(config, list):
            # for each item in the list, treat it as a config to add
            for _config in config:
                self.add_config(_config)
        elif isinstance(config, str):
            if os.path.isfile(config):
                self.__add_config_file(config)
            elif os.path.isdir(config):
                # for each recursively found file in the directory add the config file
                config_dir_files = glob.glob(config + &#39;/**&#39;, recursive=True)
                found_nested_file = False
                for config_dir_file in config_dir_files:
                    if os.path.isfile(config_dir_file):
                        found_nested_file = True
                        self.__add_config_file(config_dir_file)

                if not found_nested_file:
                    raise ValueError(
                        f&#34;Given config string ({config}) is a directory&#34; +
                        &#34; with no recursive children files.&#34;
                    )
            else:
                raise ValueError(
                    f&#34;Given config string ({config}) is not a valid path.&#34;
                )
        else:
            raise ValueError(
                f&#34;Given config ({config}) is unexpected type ({type(config)}) &#34; +
                &#34;not a dictionary, string, or list of former.&#34;
            )

    def set_step_config_overrides(self, step_name, step_config_overrides):
        &#34;&#34;&#34;Sets configuration overrides for all sub steps of a given step.

        Notes
        -----
        If step configuration overrides are already set for the given step then
        the existing overides will be replaced with the newly given step configuration
        overrides.

        Parameters
        ----------
        step_name : str
            Name of step to add configuration overrides for all sub steps for.
        step_config_overrides : dict
            Overrides for all sub steps for the step with the given name.
        &#34;&#34;&#34;
        if step_name not in self.step_configs:
            self.step_configs[step_name] = TSSCStepConfig(self, step_name)

        self.step_configs[step_name].step_config_overrides = step_config_overrides

    def __add_config_file(self, config_file):
        &#34;&#34;&#34;Adds a JSON or YAML file as config to this TSSCConfig.

        Parameters
        ----------
        config_file : str (file path)
            A string that is a path to an existing YAML or JSON file to
            parse and validate as a TSSC configuration to add to this TSSCConfig.

        Raises
        ------
        ValueError
            If can not parse given file as YAML or JSON
        AssertionError
            If dictionary parsed from given YAML or JSON file is not a valid TSSC config.
        &#34;&#34;&#34;
        # parse the configuration file
        try:
            parsed_config_file = parse_yaml_or_json_file(config_file)
        except ValueError as error:
            raise ValueError(
                f&#34;Error parsing config file ({config_file}) as json or yaml&#34;
            ) from error

        # add the config parsed from file
        try:
            self.__add_config_dict(parsed_config_file)
        except AssertionError as error:
            raise AssertionError(
                f&#34;Failed to add parsed configuration file ({config_file}): {error}&#34;
            ) from error

    def __add_config_dict(self, config_dict): # pylint: disable=too-many-locals, too-many-branches
        &#34;&#34;&#34;Add a TSSC configuration dictionary to the list of TSSC configuration dictionaries.

        Parameters
        ----------
        config_dict : dict
            A dictionary to validate as a TSSC configuration and to add to this TSSCConfig.

        Raises
        ------
        AssertionError
            If the given config_dict is not a valid TSSC configuration dictionary.
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
            If sub step does not define a step implementer.
        ValueError
            If duplicative leaf keys when merging global defaults
            If duplicative leaf keys when merging global env defaults
            If step config is not of type dict or list
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        assert TSSCConfig.TSSC_CONFIG_KEY in config_dict, \
            &#34;Failed to add invalid TSSC config. &#34; + \
            f&#34;Missing expected top level key ({TSSCConfig.TSSC_CONFIG_KEY}): &#34; + \
            f&#34;{config_dict}&#34;

        tssc_config = config_dict[TSSCConfig.TSSC_CONFIG_KEY]
        for key, value in tssc_config.items():
            # if global default key
            # else if global env defaults key
            # else assume step config
            if key == TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_DEFAULTS:
                try:
                    self.__global_defaults = deep_merge(
                        copy.deepcopy(self.__global_defaults),
                        copy.deepcopy(value)
                    )
                except ValueError as error:
                    raise ValueError(
                        f&#34;Error merging global defaults: {error}&#34;
                    ) from error
            elif key == TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS:
                for env, env_config in value.items():
                    if env not in self.__global_environment_defaults:
                        self.__global_environment_defaults[env] = {
                            TSSCConfig.TSSC_CONFIG_KEY_ENVIRONMENT_NAME: env
                        }

                    try:
                        self.__global_environment_defaults[env] = deep_merge(
                            copy.deepcopy(self.__global_environment_defaults[env]),
                            copy.deepcopy(env_config)
                        )
                    except ValueError as error:
                        raise ValueError(
                            f&#34;Error merging global environment ({env}) defaults: {error}&#34;
                        ) from error
            else:
                step_name = key
                step_config = value

                # if step_config is dict then assume step with single sub step
                if isinstance(step_config, dict):
                    sub_steps = [step_config]
                elif isinstance(step_config, list):
                    sub_steps = step_config
                else:
                    raise ValueError(
                        f&#34;Expected step ({step_name}) to have have step config ({step_config})&#34; +
                        f&#34; of type dict or list but got: {type(step_config)}&#34;
                    )

                for sub_step in sub_steps:
                    assert TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER in sub_step, \
                        f&#34;Step ({step_name}) defines a single sub step with values &#34; + \
                        f&#34;({sub_step}) but is missing value for key: &#34; + \
                        f&#34;{TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER}&#34;

                    sub_step_implementer_name = \
                        sub_step[TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER]

                    # if sub step name given
                    # else if no sub step name given use step implementer as sub step name
                    if TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME in sub_step:
                        sub_step_name = sub_step[TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME]
                    else:
                        sub_step_name = sub_step_implementer_name

                    if TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG in sub_step:
                        sub_step_config = copy.deepcopy(
                            sub_step[TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG])
                    else:
                        sub_step_config = {}

                    if TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG in sub_step:
                        sub_step_env_config = copy.deepcopy(
                            sub_step[TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG])
                    else:
                        sub_step_env_config = {}

                    self.add_or_update_step_config(
                        step_name=step_name,
                        sub_step_name=sub_step_name,
                        sub_step_implementer_name=sub_step_implementer_name,
                        sub_step_config=sub_step_config,
                        sub_step_env_config=sub_step_env_config
                    )

    def add_or_update_step_config( # pylint: disable=too-many-arguments
            self,
            step_name,
            sub_step_name,
            sub_step_implementer_name,
            sub_step_config,
            sub_step_env_config):
        &#34;&#34;&#34;Adds a new step configuration with a single new sub step or
        updates an existing step with new or updated sub step.

        Parameters
        ----------
        step_name : str
            Name of step to create or update.
        sub_step_name : str
            Name of the sub step to add or update on the new or updated step.
        sub_step_implementer_name : str
            Name of the sub step implementer for the sub step being added or updated.
            If updating this can not be different then existing sub step with the same name.
        sub_step_config : dict, optional
            Sub step configuration to add or update for named sub step on the new or updated step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step configuration.
        sub_step_env_config : dict, optional
            Sub step environment configuration to add or update for named sub step on the
                new or updated step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step environment configuration.

        Raises
        ------
        AssertionError
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        if step_name not in self.step_configs:
            self.step_configs[step_name] = TSSCStepConfig(self, step_name)

        tssc_step_config = self.step_configs[step_name]
        tssc_step_config.add_or_update_sub_step_config(
            sub_step_name=sub_step_name,
            sub_step_implementer_name=sub_step_implementer_name,
            sub_step_config=sub_step_config,
            sub_step_env_config=sub_step_env_config
        )</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY"><code class="name">var <span class="ident">TSSC_CONFIG_KEY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_ENVIRONMENT_NAME"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_ENVIRONMENT_NAME</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_DEFAULTS"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_GLOBAL_DEFAULTS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_STEP_IMPLEMENTER</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_SUB_STEP_CONFIG</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME"><code class="name">var <span class="ident">TSSC_CONFIG_KEY_SUB_STEP_NAME</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="tssc.config.TSSCConfig.global_defaults"><code class="name">var <span class="ident">global_defaults</span></code></dt>
<dd>
<div class="desc"><p>Get a deep copy of the global defaults.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the global defaults.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def global_defaults(self):
    &#34;&#34;&#34;Get a deep copy of the global defaults.

    Returns
    -------
    dict
        Deep copy of the global defaults.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__global_defaults)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.global_environment_defaults"><code class="name">var <span class="ident">global_environment_defaults</span></code></dt>
<dd>
<div class="desc"><p>Deep copy of all global environment defaults for all environments.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>deep copy of all global environment defaults.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def global_environment_defaults(self):
    &#34;&#34;&#34;Deep copy of all global environment defaults for all environments.

    Returns
    -------
    dict
        deep copy of all global environment defaults.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__global_environment_defaults)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.step_configs"><code class="name">var <span class="ident">step_configs</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code> of <code><a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def step_configs(self):
    &#34;&#34;&#34;
    Returns
    -------
    list of TSSCStepConfig
    &#34;&#34;&#34;
    return self.__tssc_step_configs</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="tssc.config.TSSCConfig.add_config"><code class="name flex">
<span>def <span class="ident">add_config</span></span>(<span>self, config)</span>
</code></dt>
<dd>
<div class="desc"><p>Parses, validates, and adds a given config to this TSSCConfig.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>config</code></strong> :&ensp;<code>dict, list, str (file</code> or <code>directory)</code></dt>
<dd>A dictionary that is a valid TSSC configuration,
a string that is a path to a YAML or JSON file that is
a valid TSSC configuration,
a string that is a path to a directory containing one or more
files that are valid YAML or JSON files that are valid
configurations,
or a list of any of the former.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If given config is not of expected type.</dd>
<dt><code>AssertionError</code></dt>
<dd>If given config contains any invalid TSSC configurations.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_config(self, config):
    &#34;&#34;&#34;Parses, validates, and adds a given config to this TSSCConfig.

    Parameters
    ----------
    config : dict, list, str (file or directory)
        A dictionary that is a valid TSSC configuration,
        a string that is a path to a YAML or JSON file that is
        a valid TSSC configuration,
        a string that is a path to a directory containing one or more
        files that are valid YAML or JSON files that are valid
        configurations,
        or a list of any of the former.

    Raises
    ------
    ValueError
        If given config is not of expected type.
    AssertionError
        If given config contains any invalid TSSC configurations.
    &#34;&#34;&#34;
    if isinstance(config, dict):
        # add the config
        self.__add_config_dict(config)
    elif isinstance(config, list):
        # for each item in the list, treat it as a config to add
        for _config in config:
            self.add_config(_config)
    elif isinstance(config, str):
        if os.path.isfile(config):
            self.__add_config_file(config)
        elif os.path.isdir(config):
            # for each recursively found file in the directory add the config file
            config_dir_files = glob.glob(config + &#39;/**&#39;, recursive=True)
            found_nested_file = False
            for config_dir_file in config_dir_files:
                if os.path.isfile(config_dir_file):
                    found_nested_file = True
                    self.__add_config_file(config_dir_file)

            if not found_nested_file:
                raise ValueError(
                    f&#34;Given config string ({config}) is a directory&#34; +
                    &#34; with no recursive children files.&#34;
                )
        else:
            raise ValueError(
                f&#34;Given config string ({config}) is not a valid path.&#34;
            )
    else:
        raise ValueError(
            f&#34;Given config ({config}) is unexpected type ({type(config)}) &#34; +
            &#34;not a dictionary, string, or list of former.&#34;
        )</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.add_or_update_step_config"><code class="name flex">
<span>def <span class="ident">add_or_update_step_config</span></span>(<span>self, step_name, sub_step_name, sub_step_implementer_name, sub_step_config, sub_step_env_config)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a new step configuration with a single new sub step or
updates an existing step with new or updated sub step.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of step to create or update.</dd>
<dt><strong><code>sub_step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step to add or update on the new or updated step.</dd>
<dt><strong><code>sub_step_implementer_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step implementer for the sub step being added or updated.
If updating this can not be different then existing sub step with the same name.</dd>
<dt><strong><code>sub_step_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Sub step configuration to add or update for named sub step on the new or updated step.
If updating this can not have any duplicative leaf keys to the existing
sub step configuration.</dd>
<dt><strong><code>sub_step_env_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Sub step environment configuration to add or update for named sub step on the
new or updated step.
If updating this can not have any duplicative leaf keys to the existing
sub step environment configuration.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>AssertionError</code></dt>
<dd>If attempt to update an existing sub step and new and existing sub step implementers
do not match.</dd>
<dt><code>ValueError</code></dt>
<dd>If new sub step configuration has duplicative leaf keys to
existing sub step configuration.
If new sub step environment configuration has duplicative leaf keys to
existing sub step environment configuration.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_or_update_step_config( # pylint: disable=too-many-arguments
        self,
        step_name,
        sub_step_name,
        sub_step_implementer_name,
        sub_step_config,
        sub_step_env_config):
    &#34;&#34;&#34;Adds a new step configuration with a single new sub step or
    updates an existing step with new or updated sub step.

    Parameters
    ----------
    step_name : str
        Name of step to create or update.
    sub_step_name : str
        Name of the sub step to add or update on the new or updated step.
    sub_step_implementer_name : str
        Name of the sub step implementer for the sub step being added or updated.
        If updating this can not be different then existing sub step with the same name.
    sub_step_config : dict, optional
        Sub step configuration to add or update for named sub step on the new or updated step.
        If updating this can not have any duplicative leaf keys to the existing
            sub step configuration.
    sub_step_env_config : dict, optional
        Sub step environment configuration to add or update for named sub step on the
            new or updated step.
        If updating this can not have any duplicative leaf keys to the existing
            sub step environment configuration.

    Raises
    ------
    AssertionError
        If attempt to update an existing sub step and new and existing sub step implementers
            do not match.
    ValueError
        If new sub step configuration has duplicative leaf keys to
            existing sub step configuration.
        If new sub step environment configuration has duplicative leaf keys to
            existing sub step environment configuration.
    &#34;&#34;&#34;

    if step_name not in self.step_configs:
        self.step_configs[step_name] = TSSCStepConfig(self, step_name)

    tssc_step_config = self.step_configs[step_name]
    tssc_step_config.add_or_update_sub_step_config(
        sub_step_name=sub_step_name,
        sub_step_implementer_name=sub_step_implementer_name,
        sub_step_config=sub_step_config,
        sub_step_env_config=sub_step_env_config
    )</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.get_global_environment_defaults_for_environment"><code class="name flex">
<span>def <span class="ident">get_global_environment_defaults_for_environment</span></span>(<span>self, env)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a deep copy of all of the global environment defaults or for a given an environment.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>env</code></strong> :&ensp;<code>str</code></dt>
<dd>The global environment defaults for the given environment.
If given environment name does not exist in environment defaults then empty dict.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the global environment defaults for the given environment
or empty dict if no environment given or environment does not exist in the defaults</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_global_environment_defaults_for_environment(self, env):
    &#34;&#34;&#34;Get a deep copy of all of the global environment defaults or for a given an environment.

    Parameters
    ----------
    env : str
        The global environment defaults for the given environment.
        If given environment name does not exist in environment defaults then empty dict.

    Returns
    -------
    dict
        Deep copy of the global environment defaults for the given environment
        or empty dict if no environment given or environment does not exist in the defaults
    &#34;&#34;&#34;
    if env is not None:
        if env in self.__global_environment_defaults:
            global_environment_defaults = copy.deepcopy(self.__global_environment_defaults[env])
        else:
            global_environment_defaults = {}
    else:
        global_environment_defaults = {}

    return global_environment_defaults</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.get_step_config"><code class="name flex">
<span>def <span class="ident">get_step_config</span></span>(<span>self, step_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the step config for a given step name.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the step to get the step configuration for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></dt>
<dd>Step configuration for the given step name or None if does not exist</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_step_config(self, step_name):
    &#34;&#34;&#34;Get the step config for a given step name.

    Parameters
    ----------
    step_name : str
        Name of the step to get the step configuration for.

    Returns
    -------
    TSSCStepConfig
        Step configuration for the given step name or None if does not exist
    &#34;&#34;&#34;
    if step_name in self.step_configs:
        step_config = self.step_configs[step_name]
    else:
        step_config = None

    return step_config</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.get_sub_step_configs"><code class="name flex">
<span>def <span class="ident">get_sub_step_configs</span></span>(<span>self, step_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets lit of configured TSSC sub step configurations for a TSSC step with the given name.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of TSSC step to get configured sub steps for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code> of <code><a title="tssc.config.TSSCSubStepConfig" href="#tssc.config.TSSCSubStepConfig">TSSCSubStepConfig</a></code></dt>
<dd>List of configured TSSC sub step configurations for the TSSC step with the given name.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_sub_step_configs(self, step_name):
    &#34;&#34;&#34;Gets lit of configured TSSC sub step configurations for a TSSC step with the given name.

    Parameters
    ----------
    step_name : str
        Name of TSSC step to get configured sub steps for.

    Returns
    -------
    list of TSSCSubStepConfig
        List of configured TSSC sub step configurations for the TSSC step with the given name.
    &#34;&#34;&#34;

    if step_name in self.step_configs:
        sub_step_configs = self.step_configs[step_name].sub_steps
    else:
        sub_step_configs = []

    return sub_step_configs</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCConfig.set_step_config_overrides"><code class="name flex">
<span>def <span class="ident">set_step_config_overrides</span></span>(<span>self, step_name, step_config_overrides)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets configuration overrides for all sub steps of a given step.</p>
<h2 id="notes">Notes</h2>
<p>If step configuration overrides are already set for the given step then
the existing overides will be replaced with the newly given step configuration
overrides.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of step to add configuration overrides for all sub steps for.</dd>
<dt><strong><code>step_config_overrides</code></strong> :&ensp;<code>dict</code></dt>
<dd>Overrides for all sub steps for the step with the given name.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_step_config_overrides(self, step_name, step_config_overrides):
    &#34;&#34;&#34;Sets configuration overrides for all sub steps of a given step.

    Notes
    -----
    If step configuration overrides are already set for the given step then
    the existing overides will be replaced with the newly given step configuration
    overrides.

    Parameters
    ----------
    step_name : str
        Name of step to add configuration overrides for all sub steps for.
    step_config_overrides : dict
        Overrides for all sub steps for the step with the given name.
    &#34;&#34;&#34;
    if step_name not in self.step_configs:
        self.step_configs[step_name] = TSSCStepConfig(self, step_name)

    self.step_configs[step_name].step_config_overrides = step_config_overrides</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="tssc.config.TSSCStepConfig"><code class="flex name class">
<span>class <span class="ident">TSSCStepConfig</span></span>
<span>(</span><span>parent_config, step_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Representation of a TSSC step configuration.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>parent_config</code></strong> :&ensp;<code><a title="tssc.config.TSSCConfig" href="#tssc.config.TSSCConfig">TSSCConfig</a></code></dt>
<dd>Parent TSSC configuration containing this step configuration.</dd>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the TSSC step.</dd>
</dl>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>__parent_config</code></strong> :&ensp;<code><a title="tssc.config.TSSCConfig" href="#tssc.config.TSSCConfig">TSSCConfig</a></code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__sub_steps</code></strong> :&ensp;<code>list</code> of <code><a title="tssc.config.TSSCSubStepConfig" href="#tssc.config.TSSCSubStepConfig">TSSCSubStepConfig</a></code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__sub_step_config_overrides</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TSSCStepConfig:
    &#34;&#34;&#34;Representation of a TSSC step configuration.

    Parameters
    ----------
    parent_config : TSSCConfig
        Parent TSSC configuration containing this step configuration.
    step_name : str
        Name of the TSSC step.

    Attributes
    ----------
    __parent_config : TSSCConfig
    __step_name : str
    __sub_steps : list of TSSCSubStepConfig
    __sub_step_config_overrides : dict
    &#34;&#34;&#34;

    def __init__(self, parent_config, step_name):
        self.__parent_config = parent_config
        self.__step_name = step_name
        self.__sub_steps = []
        self.__step_config_overrides = {}

    @property
    def parent_config(self):
        &#34;&#34;&#34;
        Returns
        -------
        TSSCConfig
        &#34;&#34;&#34;
        return self.__parent_config

    @property
    def step_name(self):
        &#34;&#34;&#34;
        Returns
        -------
        str
            Name of this step.
        &#34;&#34;&#34;
        return self.__step_name

    @property
    def sub_steps(self):
        &#34;&#34;&#34;
        Returns
        -------
        list of TSSCSubStepConfig
            Sub steps of this step.
        &#34;&#34;&#34;
        return self.__sub_steps

    def get_sub_step(self, sub_step_name):
        &#34;&#34;&#34;Get sub step of this step with a given name if one exists.

        Parameters
        ----------
        sub_step_name : str
            Name of the sub step of this step to get.

        Returns
        -------
        TSSCSubStepConfig
            Sub step of this step with the given name or
            None if no sub step with given name exists as part of this step.
        &#34;&#34;&#34;
        for sub_step in self.sub_steps:
            if sub_step_name == sub_step.sub_step_name:
                return sub_step

        return None

    @property
    def step_config_overrides(self):
        &#34;&#34;&#34;Gets a deep copy of the step configuration overrides.

        Returns
        -------
        dict
            Deep copy of the step configuration overrides.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__step_config_overrides)

    @step_config_overrides.setter
    def step_config_overrides(self, step_config_overrides):
        &#34;&#34;&#34;Sets the step configuration overrides.

        Parameters
        ----------
        step_config_overrides : dict
            New step configuration overrides.
        &#34;&#34;&#34;
        self.__step_config_overrides = step_config_overrides if step_config_overrides else {}

    def add_or_update_sub_step_config(
            self,
            sub_step_name,
            sub_step_implementer_name,
            sub_step_config=None,
            sub_step_env_config=None):
        &#34;&#34;&#34;Add a new or update an existing sub step configuration for this step.

        Parameters
        ----------
        sub_step_name : str
            Name of the sub step to add or update.
        sub_step_implementer_name : str
            Name of the sub step implementer for the sub step being added or updated.
            If updating this can not be different then existing sub step with the same name.
        sub_step_config : dict, optional
            Sub step configuration to add or update for named sub step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step configuration.
        sub_step_env_config : dict, optional
            Sub step environment configuration to add or update for named sub step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step environment configuration.

        Raises
        ------
        AssertionError
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        existing_tssc_sub_step_config = None
        for tssc_sub_step_config in self.sub_steps:
            if tssc_sub_step_config.sub_step_name == sub_step_name:
                existing_tssc_sub_step_config = tssc_sub_step_config
                break

        if existing_tssc_sub_step_config is None:
            tssc_sub_step_config = TSSCSubStepConfig(
                parent_step_config=self,
                sub_step_name=sub_step_name,
                sub_step_implementer_name=sub_step_implementer_name,
                sub_step_config=sub_step_config,
                sub_step_env_config=sub_step_env_config
            )
            self.sub_steps.append(tssc_sub_step_config)
        else:
            assert sub_step_implementer_name == tssc_sub_step_config.sub_step_implementer_name, \
                f&#34;Step ({self.step_name}) failed to update sub step ({sub_step_name})&#34; + \
                &#34; with new config due to new sub step implementer&#34; + \
                f&#34; ({sub_step_implementer_name}) not matching existing sub step implementer&#34; + \
                f&#34; ({tssc_sub_step_config.sub_step_implementer_name}).&#34;

            tssc_sub_step_config.merge_sub_step_config(sub_step_config)
            tssc_sub_step_config.merge_sub_step_env_config(sub_step_env_config)</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="tssc.config.TSSCStepConfig.parent_config"><code class="name">var <span class="ident">parent_config</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="tssc.config.TSSCConfig" href="#tssc.config.TSSCConfig">TSSCConfig</a></code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def parent_config(self):
    &#34;&#34;&#34;
    Returns
    -------
    TSSCConfig
    &#34;&#34;&#34;
    return self.__parent_config</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCStepConfig.step_config_overrides"><code class="name">var <span class="ident">step_config_overrides</span></code></dt>
<dd>
<div class="desc"><p>Gets a deep copy of the step configuration overrides.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the step configuration overrides.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def step_config_overrides(self):
    &#34;&#34;&#34;Gets a deep copy of the step configuration overrides.

    Returns
    -------
    dict
        Deep copy of the step configuration overrides.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__step_config_overrides)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCStepConfig.step_name"><code class="name">var <span class="ident">step_name</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Name of this step.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def step_name(self):
    &#34;&#34;&#34;
    Returns
    -------
    str
        Name of this step.
    &#34;&#34;&#34;
    return self.__step_name</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCStepConfig.sub_steps"><code class="name">var <span class="ident">sub_steps</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code> of <code><a title="tssc.config.TSSCSubStepConfig" href="#tssc.config.TSSCSubStepConfig">TSSCSubStepConfig</a></code></dt>
<dd>Sub steps of this step.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def sub_steps(self):
    &#34;&#34;&#34;
    Returns
    -------
    list of TSSCSubStepConfig
        Sub steps of this step.
    &#34;&#34;&#34;
    return self.__sub_steps</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="tssc.config.TSSCStepConfig.add_or_update_sub_step_config"><code class="name flex">
<span>def <span class="ident">add_or_update_sub_step_config</span></span>(<span>self, sub_step_name, sub_step_implementer_name, sub_step_config=None, sub_step_env_config=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Add a new or update an existing sub step configuration for this step.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>sub_step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step to add or update.</dd>
<dt><strong><code>sub_step_implementer_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step implementer for the sub step being added or updated.
If updating this can not be different then existing sub step with the same name.</dd>
<dt><strong><code>sub_step_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Sub step configuration to add or update for named sub step.
If updating this can not have any duplicative leaf keys to the existing
sub step configuration.</dd>
<dt><strong><code>sub_step_env_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Sub step environment configuration to add or update for named sub step.
If updating this can not have any duplicative leaf keys to the existing
sub step environment configuration.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>AssertionError</code></dt>
<dd>If attempt to update an existing sub step and new and existing sub step implementers
do not match.</dd>
<dt><code>ValueError</code></dt>
<dd>If new sub step configuration has duplicative leaf keys to
existing sub step configuration.
If new sub step environment configuration has duplicative leaf keys to
existing sub step environment configuration.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_or_update_sub_step_config(
        self,
        sub_step_name,
        sub_step_implementer_name,
        sub_step_config=None,
        sub_step_env_config=None):
    &#34;&#34;&#34;Add a new or update an existing sub step configuration for this step.

    Parameters
    ----------
    sub_step_name : str
        Name of the sub step to add or update.
    sub_step_implementer_name : str
        Name of the sub step implementer for the sub step being added or updated.
        If updating this can not be different then existing sub step with the same name.
    sub_step_config : dict, optional
        Sub step configuration to add or update for named sub step.
        If updating this can not have any duplicative leaf keys to the existing
            sub step configuration.
    sub_step_env_config : dict, optional
        Sub step environment configuration to add or update for named sub step.
        If updating this can not have any duplicative leaf keys to the existing
            sub step environment configuration.

    Raises
    ------
    AssertionError
        If attempt to update an existing sub step and new and existing sub step implementers
            do not match.
    ValueError
        If new sub step configuration has duplicative leaf keys to
            existing sub step configuration.
        If new sub step environment configuration has duplicative leaf keys to
            existing sub step environment configuration.
    &#34;&#34;&#34;

    existing_tssc_sub_step_config = None
    for tssc_sub_step_config in self.sub_steps:
        if tssc_sub_step_config.sub_step_name == sub_step_name:
            existing_tssc_sub_step_config = tssc_sub_step_config
            break

    if existing_tssc_sub_step_config is None:
        tssc_sub_step_config = TSSCSubStepConfig(
            parent_step_config=self,
            sub_step_name=sub_step_name,
            sub_step_implementer_name=sub_step_implementer_name,
            sub_step_config=sub_step_config,
            sub_step_env_config=sub_step_env_config
        )
        self.sub_steps.append(tssc_sub_step_config)
    else:
        assert sub_step_implementer_name == tssc_sub_step_config.sub_step_implementer_name, \
            f&#34;Step ({self.step_name}) failed to update sub step ({sub_step_name})&#34; + \
            &#34; with new config due to new sub step implementer&#34; + \
            f&#34; ({sub_step_implementer_name}) not matching existing sub step implementer&#34; + \
            f&#34; ({tssc_sub_step_config.sub_step_implementer_name}).&#34;

        tssc_sub_step_config.merge_sub_step_config(sub_step_config)
        tssc_sub_step_config.merge_sub_step_env_config(sub_step_env_config)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCStepConfig.get_sub_step"><code class="name flex">
<span>def <span class="ident">get_sub_step</span></span>(<span>self, sub_step_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Get sub step of this step with a given name if one exists.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>sub_step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step of this step to get.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="tssc.config.TSSCSubStepConfig" href="#tssc.config.TSSCSubStepConfig">TSSCSubStepConfig</a></code></dt>
<dd>Sub step of this step with the given name or
None if no sub step with given name exists as part of this step.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_sub_step(self, sub_step_name):
    &#34;&#34;&#34;Get sub step of this step with a given name if one exists.

    Parameters
    ----------
    sub_step_name : str
        Name of the sub step of this step to get.

    Returns
    -------
    TSSCSubStepConfig
        Sub step of this step with the given name or
        None if no sub step with given name exists as part of this step.
    &#34;&#34;&#34;
    for sub_step in self.sub_steps:
        if sub_step_name == sub_step.sub_step_name:
            return sub_step

    return None</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="tssc.config.TSSCSubStepConfig"><code class="flex name class">
<span>class <span class="ident">TSSCSubStepConfig</span></span>
<span>(</span><span>parent_step_config, sub_step_name, sub_step_implementer_name, sub_step_config=None, sub_step_env_config=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Representation of a TSSC sub step configuration.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>parent_step_config</code></strong> :&ensp;<code><a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></dt>
<dd>Parent TSSC step config to this sub step coonfig.</dd>
<dt><strong><code>sub_step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of this sub step.</dd>
<dt><strong><code>sub_step_implementer_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Step implementer for this sub step.</dd>
<dt><strong><code>sub_step_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Configuration specific to this sub step.</dd>
<dt><strong><code>sub_step_env_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Environment specific configuration specific to this sub step.</dd>
</dl>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>__parent_step_config</code></strong> :&ensp;<code><a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__sub_step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__sub_step_implementer_name</code></strong> :&ensp;<code>str</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__sub_step_config</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__sub_step_env_config</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TSSCSubStepConfig:
    &#34;&#34;&#34;Representation of a TSSC sub step configuration.

    Parameters
    ----------
    parent_step_config : TSSCStepConfig
        Parent TSSC step config to this sub step coonfig.
    sub_step_name : str
        Name of this sub step.
    sub_step_implementer_name : str
        Step implementer for this sub step.
    sub_step_config : dict, optional
        Configuration specific to this sub step.
    sub_step_env_config : dict, optional
        Environment specific configuration specific to this sub step.

    Attributes
    ----------
    __parent_step_config : TSSCStepConfig
    __sub_step_name : str
    __sub_step_implementer_name : str
    __sub_step_config : dict
    __sub_step_env_config : dict
    &#34;&#34;&#34;

    def __init__( # pylint: disable=too-many-arguments
            self,
            parent_step_config,
            sub_step_name,
            sub_step_implementer_name,
            sub_step_config=None,
            sub_step_env_config=None):

        self.__parent_step_config = parent_step_config
        self.__sub_step_name = sub_step_name
        self.__sub_step_implementer_name = sub_step_implementer_name

        if sub_step_config is None:
            sub_step_config = {}
        self.__sub_step_config = sub_step_config

        if sub_step_env_config is None:
            sub_step_env_config = {}
        self.__sub_step_env_config = sub_step_env_config

    @property
    def parent_config(self):
        &#34;&#34;&#34;
        Returns
        -------
        TSSCConfig
            Parent TSSC config.
        &#34;&#34;&#34;
        return self.parent_step_config.parent_config

    @property
    def parent_step_config(self):
        &#34;&#34;&#34;
        Returns
        -------
        TSSCStepConfig
            Parent TSSC step config.
        &#34;&#34;&#34;
        return self.__parent_step_config

    @property
    def step_name(self):
        &#34;&#34;&#34;Convenience function to get parent TSSC step name.

        Returns
        -------
        str
            Parent TSSC step name.
        &#34;&#34;&#34;
        return self.parent_step_config.step_name

    @property
    def step_config_overrides(self):
        &#34;&#34;&#34;Convenience function to get step config overrides

        Returns
        -------
        str
            Parent TSSC step config overrides
        &#34;&#34;&#34;
        return self.parent_step_config.step_config_overrides

    @property
    def sub_step_name(self):
        &#34;&#34;&#34;
        Returns
        -------
        str
            TSSC sub step name.
        &#34;&#34;&#34;
        return self.__sub_step_name

    @property
    def sub_step_implementer_name(self):
        &#34;&#34;&#34;
        Returns
        -------
        str
            TSSC implementer name.
        &#34;&#34;&#34;
        return self.__sub_step_implementer_name

    @property
    def sub_step_config(self):
        &#34;&#34;&#34;Get a deep copy of the sub step configuration.

        Returns
        -------
        dict
            Deep copy of the sub step configuration.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__sub_step_config)

    @property
    def global_defaults(self):
        &#34;&#34;&#34;Convince function for getting the global defaults from the parent config.

        Returns
        -------
        dict
            Deep copy of the global defaults
        &#34;&#34;&#34;
        return self.parent_config.global_defaults

    @property
    def sub_step_env_config(self):
        &#34;&#34;&#34;Gets the environment specific configuration for all environments for this sub step.

        Returns
        -------
        dict
            The environment specific configuration for all environments for this sub step.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__sub_step_env_config)

    def get_global_environment_defaults(self, env):
        &#34;&#34;&#34;Convince function for getting the global environment defaults from the parent config.

        Parameters
        ----------
        env : str
            Environment to get the global environment configuration for.

        Returns
        -------
        dict
            Deep copy of the global defaults for a given environment
        &#34;&#34;&#34;
        return self.parent_config.get_global_environment_defaults_for_environment(env)

    def get_sub_step_env_config(self, env):
        &#34;&#34;&#34;Get the sub step environment configuration for an environment.

        Parameters
        ----------
        env : str
            Environment to get the sub step configuration for.

        Returns
        -------
        dict
            Environment specific sub step configuration.
            Empty dict if no environment specific sub step configuration.
        &#34;&#34;&#34;
        if env in self.sub_step_env_config:
            sub_step_env_config = self.sub_step_env_config[env]
        else:
            sub_step_env_config = {}

        return sub_step_env_config

    def merge_sub_step_config(self, new_sub_step_config):
        &#34;&#34;&#34;Merge new sub step configuration into the existing sub step configuration.

        Parameters
        ----------
        new_sub_step_config : dict
            New sub step configuration to merge into the existing sub step configuration.

        Raises
        ------
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
        &#34;&#34;&#34;

        if new_sub_step_config is not None:
            try:
                self.__sub_step_config = deep_merge(
                    self.sub_step_config,
                    copy.deepcopy(new_sub_step_config)
                )
            except ValueError as error:
                raise ValueError(
                    &#34;Error merging new sub step configuration&#34; +
                    &#34; into existing sub step configuration&#34; +
                    f&#34; for sub step ({self.sub_step_name}) of step ({self.step_name}): {error}&#34;
                ) from error

    def merge_sub_step_env_config(self, new_sub_step_env_config):
        &#34;&#34;&#34;Merge new sub step environment configuration into the existing
        sub step environment configuration.

        Parameters
        ----------
        new_sub_step_env_config : dict
            New sub step environment configuration to merge into
                the existing sub step environment configuration.

        Raises
        ------
        ValueError
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        if new_sub_step_env_config is not None:
            try:
                self.__sub_step_env_config = deep_merge(
                    self.__sub_step_env_config,
                    copy.deepcopy(new_sub_step_env_config)
                )
            except ValueError as error:
                raise ValueError(
                    &#34;Error merging new sub step environment configuration&#34; +
                    &#34; into existing sub step environment configuration&#34; +
                    f&#34; for sub step ({self.sub_step_name}) of step ({self.step_name}): {error}&#34;
                ) from error

    def get_config_value(self, key, environment=None, defaults=None):
        &#34;&#34;&#34;Get the configuration value for a given configuration key from the
        merged set of configuration sources.

        From least precedence to highest precedence.

            1. defaults
            2. Global Configuration Defaults (self.global_config_defaults)
            3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
            4. Step Configuration ( self.step_config)
            5. Step Environment Configuration (self.step_environment_config)
            6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

        Also See
        --------
        get_copy_of_runtime_step_config

        Parameters
        ----------
        key : str
            Key to get the configuration value for.
        environment : str, optional
            Environment to include the configuration for if running in the context of
            a specific environment.
        defaults : dict, optional
            If no value for the given configuration key found in any of the configuration
            sources then use these defaults as last resort.

        Returns
        -------
        str, int, dict, list, or bool or None
            Value of the given configuration key or None if one does not exist
            for this sub step in the given context with the given defaults.
        &#34;&#34;&#34;
        runtime_step_config = self.__merge_runtime_step_config(environment, defaults)

        if key in runtime_step_config:
            value = copy.deepcopy(runtime_step_config[key])
        else:
            value = None

        return value

    def get_copy_of_runtime_step_config(self, environment=None, defaults=None):
        &#34;&#34;&#34;Take all of the context about this sub step merges together a single dictionary
        with all of the configuration for a given step.

        From least precedence to highest precedence.

            1. defaults
            2. Global Configuration Defaults (self.global_config_defaults)
            3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
            4. Step Configuration ( self.step_config)
            5. Step Environment Configuration (self.step_environment_config)
            6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

        Also See
        --------
        get_config_value

        Parameters
        ----------
        environment : str, optional
            Environment to get the runtime step configuration for
        defaults : dict, optional
            Defaults to use if no other configuration specified from any other source
            for each given key.

        Returns
        -------
        dict
            A deep copy of the merged runtime step configuration
        &#34;&#34;&#34;
        defaults = defaults if defaults else {}

        return copy.deepcopy(self.__merge_runtime_step_config(environment, defaults))

    def __merge_runtime_step_config(self, environment=None, defaults=None):
        &#34;&#34;&#34;Take all of the context about this sub step merges together a single dictionary
        with all of the configuration for a given step.

        From least precedence to highest precedence.

            1. defaults
            2. Global Configuration Defaults (self.global_config_defaults)
            3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
            4. Step Configuration ( self.step_config)
            5. Step Environment Configuration (self.step_environment_config)
            6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

        Notes
        -----
        This is not intended to be accessed outside of this class since it gives direct access
        to the underlying dictionaries which could in theory be changed, which would not be the
        intended use.

        Parameters
        ----------
        environment : str, optional
            Environment to get the runtime step configuration for
        defaults : dict, optional
            Defaults to use if no other configuration specified from any other source
            for each given key.

        Returns
        -------
        dict
            Merged runtime step configuration
        &#34;&#34;&#34;
        defaults = defaults if defaults else {}

        return {
            **defaults,
            **self.global_defaults,
            **self.get_global_environment_defaults(environment),
            **self.sub_step_config,
            **self.get_sub_step_env_config(environment),
            **self.step_config_overrides,
        }</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="tssc.config.TSSCSubStepConfig.global_defaults"><code class="name">var <span class="ident">global_defaults</span></code></dt>
<dd>
<div class="desc"><p>Convince function for getting the global defaults from the parent config.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the global defaults</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def global_defaults(self):
    &#34;&#34;&#34;Convince function for getting the global defaults from the parent config.

    Returns
    -------
    dict
        Deep copy of the global defaults
    &#34;&#34;&#34;
    return self.parent_config.global_defaults</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.parent_config"><code class="name">var <span class="ident">parent_config</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="tssc.config.TSSCConfig" href="#tssc.config.TSSCConfig">TSSCConfig</a></code></dt>
<dd>Parent TSSC config.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def parent_config(self):
    &#34;&#34;&#34;
    Returns
    -------
    TSSCConfig
        Parent TSSC config.
    &#34;&#34;&#34;
    return self.parent_step_config.parent_config</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.parent_step_config"><code class="name">var <span class="ident">parent_step_config</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></dt>
<dd>Parent TSSC step config.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def parent_step_config(self):
    &#34;&#34;&#34;
    Returns
    -------
    TSSCStepConfig
        Parent TSSC step config.
    &#34;&#34;&#34;
    return self.__parent_step_config</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.step_config_overrides"><code class="name">var <span class="ident">step_config_overrides</span></code></dt>
<dd>
<div class="desc"><p>Convenience function to get step config overrides</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Parent TSSC step config overrides</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def step_config_overrides(self):
    &#34;&#34;&#34;Convenience function to get step config overrides

    Returns
    -------
    str
        Parent TSSC step config overrides
    &#34;&#34;&#34;
    return self.parent_step_config.step_config_overrides</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.step_name"><code class="name">var <span class="ident">step_name</span></code></dt>
<dd>
<div class="desc"><p>Convenience function to get parent TSSC step name.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Parent TSSC step name.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def step_name(self):
    &#34;&#34;&#34;Convenience function to get parent TSSC step name.

    Returns
    -------
    str
        Parent TSSC step name.
    &#34;&#34;&#34;
    return self.parent_step_config.step_name</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.sub_step_config"><code class="name">var <span class="ident">sub_step_config</span></code></dt>
<dd>
<div class="desc"><p>Get a deep copy of the sub step configuration.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the sub step configuration.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def sub_step_config(self):
    &#34;&#34;&#34;Get a deep copy of the sub step configuration.

    Returns
    -------
    dict
        Deep copy of the sub step configuration.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__sub_step_config)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.sub_step_env_config"><code class="name">var <span class="ident">sub_step_env_config</span></code></dt>
<dd>
<div class="desc"><p>Gets the environment specific configuration for all environments for this sub step.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>The environment specific configuration for all environments for this sub step.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def sub_step_env_config(self):
    &#34;&#34;&#34;Gets the environment specific configuration for all environments for this sub step.

    Returns
    -------
    dict
        The environment specific configuration for all environments for this sub step.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__sub_step_env_config)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.sub_step_implementer_name"><code class="name">var <span class="ident">sub_step_implementer_name</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>TSSC implementer name.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def sub_step_implementer_name(self):
    &#34;&#34;&#34;
    Returns
    -------
    str
        TSSC implementer name.
    &#34;&#34;&#34;
    return self.__sub_step_implementer_name</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.sub_step_name"><code class="name">var <span class="ident">sub_step_name</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>TSSC sub step name.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def sub_step_name(self):
    &#34;&#34;&#34;
    Returns
    -------
    str
        TSSC sub step name.
    &#34;&#34;&#34;
    return self.__sub_step_name</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="tssc.config.TSSCSubStepConfig.get_config_value"><code class="name flex">
<span>def <span class="ident">get_config_value</span></span>(<span>self, key, environment=None, defaults=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the configuration value for a given configuration key from the
merged set of configuration sources.</p>
<p>From least precedence to highest precedence.</p>
<pre><code>1. defaults
2. Global Configuration Defaults (self.global_config_defaults)
3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
4. Step Configuration ( self.step_config)
5. Step Environment Configuration (self.step_environment_config)
6. Step Configuration Runtime Overrides (step_config_runtime_overrides)
</code></pre>
<h2 id="also-see">Also See</h2>
<p>get_copy_of_runtime_step_config</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>Key to get the configuration value for.</dd>
<dt><strong><code>environment</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Environment to include the configuration for if running in the context of
a specific environment.</dd>
<dt><strong><code>defaults</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>If no value for the given configuration key found in any of the configuration
sources then use these defaults as last resort.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str, int, dict, list,</code> or <code>bool</code> or <code>None</code></dt>
<dd>Value of the given configuration key or None if one does not exist
for this sub step in the given context with the given defaults.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_config_value(self, key, environment=None, defaults=None):
    &#34;&#34;&#34;Get the configuration value for a given configuration key from the
    merged set of configuration sources.

    From least precedence to highest precedence.

        1. defaults
        2. Global Configuration Defaults (self.global_config_defaults)
        3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
        4. Step Configuration ( self.step_config)
        5. Step Environment Configuration (self.step_environment_config)
        6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

    Also See
    --------
    get_copy_of_runtime_step_config

    Parameters
    ----------
    key : str
        Key to get the configuration value for.
    environment : str, optional
        Environment to include the configuration for if running in the context of
        a specific environment.
    defaults : dict, optional
        If no value for the given configuration key found in any of the configuration
        sources then use these defaults as last resort.

    Returns
    -------
    str, int, dict, list, or bool or None
        Value of the given configuration key or None if one does not exist
        for this sub step in the given context with the given defaults.
    &#34;&#34;&#34;
    runtime_step_config = self.__merge_runtime_step_config(environment, defaults)

    if key in runtime_step_config:
        value = copy.deepcopy(runtime_step_config[key])
    else:
        value = None

    return value</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.get_copy_of_runtime_step_config"><code class="name flex">
<span>def <span class="ident">get_copy_of_runtime_step_config</span></span>(<span>self, environment=None, defaults=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Take all of the context about this sub step merges together a single dictionary
with all of the configuration for a given step.</p>
<p>From least precedence to highest precedence.</p>
<pre><code>1. defaults
2. Global Configuration Defaults (self.global_config_defaults)
3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
4. Step Configuration ( self.step_config)
5. Step Environment Configuration (self.step_environment_config)
6. Step Configuration Runtime Overrides (step_config_runtime_overrides)
</code></pre>
<h2 id="also-see">Also See</h2>
<p>get_config_value</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>environment</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Environment to get the runtime step configuration for</dd>
<dt><strong><code>defaults</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Defaults to use if no other configuration specified from any other source
for each given key.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>A deep copy of the merged runtime step configuration</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_copy_of_runtime_step_config(self, environment=None, defaults=None):
    &#34;&#34;&#34;Take all of the context about this sub step merges together a single dictionary
    with all of the configuration for a given step.

    From least precedence to highest precedence.

        1. defaults
        2. Global Configuration Defaults (self.global_config_defaults)
        3. Global Environment Configuration Defaults (self.global_environment_config_defaults)
        4. Step Configuration ( self.step_config)
        5. Step Environment Configuration (self.step_environment_config)
        6. Step Configuration Runtime Overrides (step_config_runtime_overrides)

    Also See
    --------
    get_config_value

    Parameters
    ----------
    environment : str, optional
        Environment to get the runtime step configuration for
    defaults : dict, optional
        Defaults to use if no other configuration specified from any other source
        for each given key.

    Returns
    -------
    dict
        A deep copy of the merged runtime step configuration
    &#34;&#34;&#34;
    defaults = defaults if defaults else {}

    return copy.deepcopy(self.__merge_runtime_step_config(environment, defaults))</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.get_global_environment_defaults"><code class="name flex">
<span>def <span class="ident">get_global_environment_defaults</span></span>(<span>self, env)</span>
</code></dt>
<dd>
<div class="desc"><p>Convince function for getting the global environment defaults from the parent config.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>env</code></strong> :&ensp;<code>str</code></dt>
<dd>Environment to get the global environment configuration for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the global defaults for a given environment</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_global_environment_defaults(self, env):
    &#34;&#34;&#34;Convince function for getting the global environment defaults from the parent config.

    Parameters
    ----------
    env : str
        Environment to get the global environment configuration for.

    Returns
    -------
    dict
        Deep copy of the global defaults for a given environment
    &#34;&#34;&#34;
    return self.parent_config.get_global_environment_defaults_for_environment(env)</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.get_sub_step_env_config"><code class="name flex">
<span>def <span class="ident">get_sub_step_env_config</span></span>(<span>self, env)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the sub step environment configuration for an environment.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>env</code></strong> :&ensp;<code>str</code></dt>
<dd>Environment to get the sub step configuration for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Environment specific sub step configuration.
Empty dict if no environment specific sub step configuration.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_sub_step_env_config(self, env):
    &#34;&#34;&#34;Get the sub step environment configuration for an environment.

    Parameters
    ----------
    env : str
        Environment to get the sub step configuration for.

    Returns
    -------
    dict
        Environment specific sub step configuration.
        Empty dict if no environment specific sub step configuration.
    &#34;&#34;&#34;
    if env in self.sub_step_env_config:
        sub_step_env_config = self.sub_step_env_config[env]
    else:
        sub_step_env_config = {}

    return sub_step_env_config</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.merge_sub_step_config"><code class="name flex">
<span>def <span class="ident">merge_sub_step_config</span></span>(<span>self, new_sub_step_config)</span>
</code></dt>
<dd>
<div class="desc"><p>Merge new sub step configuration into the existing sub step configuration.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>new_sub_step_config</code></strong> :&ensp;<code>dict</code></dt>
<dd>New sub step configuration to merge into the existing sub step configuration.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If new sub step configuration has duplicative leaf keys to
existing sub step configuration.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def merge_sub_step_config(self, new_sub_step_config):
    &#34;&#34;&#34;Merge new sub step configuration into the existing sub step configuration.

    Parameters
    ----------
    new_sub_step_config : dict
        New sub step configuration to merge into the existing sub step configuration.

    Raises
    ------
    ValueError
        If new sub step configuration has duplicative leaf keys to
            existing sub step configuration.
    &#34;&#34;&#34;

    if new_sub_step_config is not None:
        try:
            self.__sub_step_config = deep_merge(
                self.sub_step_config,
                copy.deepcopy(new_sub_step_config)
            )
        except ValueError as error:
            raise ValueError(
                &#34;Error merging new sub step configuration&#34; +
                &#34; into existing sub step configuration&#34; +
                f&#34; for sub step ({self.sub_step_name}) of step ({self.step_name}): {error}&#34;
            ) from error</code></pre>
</details>
</dd>
<dt id="tssc.config.TSSCSubStepConfig.merge_sub_step_env_config"><code class="name flex">
<span>def <span class="ident">merge_sub_step_env_config</span></span>(<span>self, new_sub_step_env_config)</span>
</code></dt>
<dd>
<div class="desc"><p>Merge new sub step environment configuration into the existing
sub step environment configuration.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>new_sub_step_env_config</code></strong> :&ensp;<code>dict</code></dt>
<dd>New sub step environment configuration to merge into
the existing sub step environment configuration.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If new sub step environment configuration has duplicative leaf keys to
existing sub step environment configuration.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def merge_sub_step_env_config(self, new_sub_step_env_config):
    &#34;&#34;&#34;Merge new sub step environment configuration into the existing
    sub step environment configuration.

    Parameters
    ----------
    new_sub_step_env_config : dict
        New sub step environment configuration to merge into
            the existing sub step environment configuration.

    Raises
    ------
    ValueError
        If new sub step environment configuration has duplicative leaf keys to
            existing sub step environment configuration.
    &#34;&#34;&#34;

    if new_sub_step_env_config is not None:
        try:
            self.__sub_step_env_config = deep_merge(
                self.__sub_step_env_config,
                copy.deepcopy(new_sub_step_env_config)
            )
        except ValueError as error:
            raise ValueError(
                &#34;Error merging new sub step environment configuration&#34; +
                &#34; into existing sub step environment configuration&#34; +
                f&#34; for sub step ({self.sub_step_name}) of step ({self.step_name}): {error}&#34;
            ) from error</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="tssc" href="index.html">tssc</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="tssc.config.TSSCConfig" href="#tssc.config.TSSCConfig">TSSCConfig</a></code></h4>
<ul class="">
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY">TSSC_CONFIG_KEY</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_ENVIRONMENT_NAME" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_ENVIRONMENT_NAME">TSSC_CONFIG_KEY_ENVIRONMENT_NAME</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_DEFAULTS" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_DEFAULTS">TSSC_CONFIG_KEY_GLOBAL_DEFAULTS</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS">TSSC_CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_STEP_IMPLEMENTER">TSSC_CONFIG_KEY_STEP_IMPLEMENTER</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_CONFIG">TSSC_CONFIG_KEY_SUB_STEP_CONFIG</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG">TSSC_CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME" href="#tssc.config.TSSCConfig.TSSC_CONFIG_KEY_SUB_STEP_NAME">TSSC_CONFIG_KEY_SUB_STEP_NAME</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.add_config" href="#tssc.config.TSSCConfig.add_config">add_config</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.add_or_update_step_config" href="#tssc.config.TSSCConfig.add_or_update_step_config">add_or_update_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.get_global_environment_defaults_for_environment" href="#tssc.config.TSSCConfig.get_global_environment_defaults_for_environment">get_global_environment_defaults_for_environment</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.get_step_config" href="#tssc.config.TSSCConfig.get_step_config">get_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.get_sub_step_configs" href="#tssc.config.TSSCConfig.get_sub_step_configs">get_sub_step_configs</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.global_defaults" href="#tssc.config.TSSCConfig.global_defaults">global_defaults</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.global_environment_defaults" href="#tssc.config.TSSCConfig.global_environment_defaults">global_environment_defaults</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.set_step_config_overrides" href="#tssc.config.TSSCConfig.set_step_config_overrides">set_step_config_overrides</a></code></li>
<li><code><a title="tssc.config.TSSCConfig.step_configs" href="#tssc.config.TSSCConfig.step_configs">step_configs</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="tssc.config.TSSCStepConfig" href="#tssc.config.TSSCStepConfig">TSSCStepConfig</a></code></h4>
<ul class="">
<li><code><a title="tssc.config.TSSCStepConfig.add_or_update_sub_step_config" href="#tssc.config.TSSCStepConfig.add_or_update_sub_step_config">add_or_update_sub_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCStepConfig.get_sub_step" href="#tssc.config.TSSCStepConfig.get_sub_step">get_sub_step</a></code></li>
<li><code><a title="tssc.config.TSSCStepConfig.parent_config" href="#tssc.config.TSSCStepConfig.parent_config">parent_config</a></code></li>
<li><code><a title="tssc.config.TSSCStepConfig.step_config_overrides" href="#tssc.config.TSSCStepConfig.step_config_overrides">step_config_overrides</a></code></li>
<li><code><a title="tssc.config.TSSCStepConfig.step_name" href="#tssc.config.TSSCStepConfig.step_name">step_name</a></code></li>
<li><code><a title="tssc.config.TSSCStepConfig.sub_steps" href="#tssc.config.TSSCStepConfig.sub_steps">sub_steps</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="tssc.config.TSSCSubStepConfig" href="#tssc.config.TSSCSubStepConfig">TSSCSubStepConfig</a></code></h4>
<ul class="">
<li><code><a title="tssc.config.TSSCSubStepConfig.get_config_value" href="#tssc.config.TSSCSubStepConfig.get_config_value">get_config_value</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.get_copy_of_runtime_step_config" href="#tssc.config.TSSCSubStepConfig.get_copy_of_runtime_step_config">get_copy_of_runtime_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.get_global_environment_defaults" href="#tssc.config.TSSCSubStepConfig.get_global_environment_defaults">get_global_environment_defaults</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.get_sub_step_env_config" href="#tssc.config.TSSCSubStepConfig.get_sub_step_env_config">get_sub_step_env_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.global_defaults" href="#tssc.config.TSSCSubStepConfig.global_defaults">global_defaults</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.merge_sub_step_config" href="#tssc.config.TSSCSubStepConfig.merge_sub_step_config">merge_sub_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.merge_sub_step_env_config" href="#tssc.config.TSSCSubStepConfig.merge_sub_step_env_config">merge_sub_step_env_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.parent_config" href="#tssc.config.TSSCSubStepConfig.parent_config">parent_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.parent_step_config" href="#tssc.config.TSSCSubStepConfig.parent_step_config">parent_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.step_config_overrides" href="#tssc.config.TSSCSubStepConfig.step_config_overrides">step_config_overrides</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.step_name" href="#tssc.config.TSSCSubStepConfig.step_name">step_name</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.sub_step_config" href="#tssc.config.TSSCSubStepConfig.sub_step_config">sub_step_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.sub_step_env_config" href="#tssc.config.TSSCSubStepConfig.sub_step_env_config">sub_step_env_config</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.sub_step_implementer_name" href="#tssc.config.TSSCSubStepConfig.sub_step_implementer_name">sub_step_implementer_name</a></code></li>
<li><code><a title="tssc.config.TSSCSubStepConfig.sub_step_name" href="#tssc.config.TSSCSubStepConfig.sub_step_name">sub_step_name</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>